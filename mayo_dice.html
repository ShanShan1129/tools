<html>

<head>
    <title>まよキンダイスの確率をお前に教える</title>
</head>

<body bgcolor="#d8dbe0">
    <form name="form1">

        <font size=5 color=red>まよキンダイスの確率をお前に教える</font><br>
        <br>
        各項目に数値を入力してから計算ボタンをクリック<br>
        ぶっちゃけ<a href="https://gist.github.com/mizar/1088333">ここ</a>の確率表を参照してるだけなので一から計算してないけど<br>
        <br>
        難易度………<input type="text" id="t1" size="10" />　<br />
        固定値………<input type="text" id="t2" size="10" />　<br />
        ダイス数……<input type="text" id="t3" size="10" />　(2以上40以下)<br />
        <input type="checkbox" id="deadeye">必殺有効(11以上で絶対成功系)<br />


        <input type="button" value="計算・皇" onclick="calc()" style="background-color:silver" /><br />
    </form>
    <div id="div1"></div><br />
    <br /><br />
    深夜テンションの適当な実装であることを教える<br>
    バグがあったら…教えてくれ(^^)<br>
    <details>
        <summary>更新履歴</summary>
        ver1.2<br>
        ・必殺とかで絶対成功が11以上の時モード搭載<br>
        ver1.1<br>
        ・絶対成功、絶対失敗を考慮するように<br>
        ver1.0<br>
        ・公開
    </details>
</body>
<script type="text/javascript">
    table = [[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,], [0.972222222, 0.99537037, 0.999228395, 0.999871399, 0.999978567, 0.999996428, 0.999999405, 0.999999901, 0.999999983, 0.999999997, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,], [0.916666667, 0.981481481, 0.996141975, 0.999228395, 0.999849966, 0.999971422, 0.999994642, 0.999999008, 0.999999818, 0.999999967, 0.999999994, 0.999999999, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,], [0.833333333, 0.949074074, 0.984567901, 0.99524177, 0.998499657, 0.999517747, 0.999842821, 0.999948302, 0.9999829, 0.999994325, 0.999998113, 0.999999372, 0.999999791, 0.99999993, 0.999999977, 0.999999992, 0.999999997, 0.999999999, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,], [0.722222222, 0.893518519, 0.959876543, 0.984953704, 0.994384431, 0.997917381, 0.999233158, 0.999719678, 0.999898224, 0.999963277, 0.999986823, 0.999995295, 0.999998327, 0.999999408, 0.999999791, 0.999999926, 0.999999974, 0.999999991, 0.999999997, 0.999999999, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,], [0.583333333, 0.805555556, 0.909722222, 0.95781893, 0.980131173, 0.990562128, 0.995479324, 0.997817358, 0.998938597, 0.999480641, 0.999744564, 0.999873852, 0.999937501, 0.99996896, 0.999984555, 0.999992305, 0.999996162, 0.999998084, 0.999999043, 0.999999522, 0.999999761, 0.999999881, 0.99999994, 0.99999997, 0.999999985, 0.999999993, 0.999999996, 0.999999998, 0.999999999, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,], [0.416666667, 0.680555556, 0.826388889, 0.905735597, 0.948881173, 0.972332962, 0.985062657, 0.991957983, 0.995683388, 0.997690276, 0.998768001, 0.99934488, 0.99965267, 0.999816372, 0.999903175, 0.999949072, 0.999973274, 0.999986005, 0.999992686, 0.999996184, 0.999998013, 0.999998967, 0.999999464, 0.999999722, 0.999999856, 0.999999925, 0.999999962, 0.99999998, 0.99999999, 0.999999995, 0.999999997, 0.999999999, 0.999999999, 1, 1, 1, 1, 1, 1,], [0.277777778, 0.523148148, 0.694444444, 0.805941358, 0.876843278, 0.921642804, 0.949955228, 0.967899706, 0.979318586, 0.986617568, 0.991304801, 0.994328721, 0.996288218, 0.997563231, 0.998395995, 0.998941742, 0.999300449, 0.999536819, 0.999692911, 0.999796175, 0.999864594, 0.999909981, 0.99994012, 0.99996015, 0.999973469, 0.999982332, 0.999988231, 0.999992159, 0.999994776, 0.999996518, 0.99999768, 0.999998454, 0.999998969, 0.999999313, 0.999999542, 0.999999695, 0.999999796, 0.999999864, 0.99999991,], [0.166666667, 0.356481481, 0.521604938, 0.65162037, 0.749271262, 0.820819759, 0.872528006, 0.909600667, 0.936049437, 0.954855811, 0.968194051, 0.977633547, 0.984300476, 0.989000035, 0.992306426, 0.994628231, 0.996255595, 0.997394135, 0.99818927, 0.998743626, 0.99912948, 0.999397629, 0.999583701, 0.999712636, 0.99980186, 0.999863526, 0.999906094, 0.999935445, 0.999955662, 0.999969574, 0.999979137, 0.999985705, 0.999990213, 0.999993304, 0.999995421, 0.999996871, 0.999997863, 0.999998542, 0.999999005,], [0.083333333, 0.199074074, 0.320216049, 0.433513374, 0.533414781, 0.618494942, 0.689395076, 0.747665637, 0.795140592, 0.833619209, 0.864721305, 0.88983687, 0.910124228, 0.92653081, 0.939822352, 0.950613179, 0.959394086, 0.966556444, 0.972412303, 0.977210739, 0.98115096, 0.984392709, 0.987064466, 0.989269891, 0.991092894, 0.992601613, 0.993851545, 0.994888022, 0.995748167, 0.996462455, 0.997055957, 0.997549335, 0.997959646, 0.998300993, 0.998585048, 0.998821484, 0.999018323, 0.999182224, 0.999318718,], [0.027777778, 0.074074074, 0.131944444, 0.196244856, 0.263224451, 0.330204047, 0.395323098, 0.457341241, 0.515483251, 0.569318446, 0.618667374, 0.663530036, 0.70403105, 0.740378114, 0.77283085, 0.801677726, 0.827219231, 0.849755853, 0.869579733, 0.886969102, 0.9021848, 0.915468346, 0.927041132, 0.937104424, 0.945839921, 0.953410684, 0.959962307, 0.965624203, 0.970510958, 0.974723679, 0.978351299, 0.981471832, 0.984153541, 0.986456018, 0.988431182, 0.99012418, 0.991574201, 0.99281521, 0.993876599,]]
    table2 = [0.027777778, 0.00462963, 0.000771605, 0.000128601, 2.14335E-05, 3.57225E-06, 5.95374E-07, 9.9229E-08, 1.65382E-08, 2.75636E-09, 4.59394E-10, 7.65656E-11, 1.27609E-11, 2.12682E-12, 3.5447E-13, 5.90784E-14, 9.8464E-15, 1.64107E-15, 2.73511E-16, 4.55852E-17, 7.59753E-18, 1.26626E-18, 2.11043E-19, 3.51738E-20, 5.86229E-21, 9.77049E-22, 1.62841E-22, 2.71402E-23, 4.52337E-24, 7.53896E-25, 1.25649E-25, 2.09415E-26, 3.49026E-27, 5.8171E-28, 9.6952E-29, 1.6159E-29, 2.693E-30, 4.49E-31, 7.5E-32,]
    table12 = [0.027777778, 0.074074074, 0.131944444, 0.196244856, 0.263224451, 0.330204047, 0.395323098, 0.457341241, 0.515483251, 0.569318446, 0.618667374, 0.663530036, 0.70403105, 0.740378114, 0.77283085, 0.801677726, 0.827219231, 0.849755853, 0.869579733, 0.886969102, 0.9021848, 0.915468346, 0.927041132, 0.937104424, 0.945839921, 0.953410684, 0.959962307, 0.965624203, 0.970510958, 0.974723679, 0.978351299, 0.981471832, 0.984153541, 0.986456018, 0.988431182, 0.99012418, 0.991574201, 0.99281521, 0.993876599,]
    table11 = [0.083333333, 0.199074074, 0.320216049, 0.433513374, 0.533414781, 0.618494942, 0.689395076, 0.747665637, 0.795140592, 0.833619209, 0.864721305, 0.88983687, 0.910124228, 0.92653081, 0.939822352, 0.950613179, 0.959394086, 0.966556444, 0.972412303, 0.977210739, 0.98115096, 0.984392709, 0.987064466, 0.989269891, 0.991092894, 0.992601613, 0.993851545, 0.994888022, 0.995748167, 0.996462455, 0.997055957, 0.997549335, 0.997959646, 0.998300993, 0.998585048, 0.998821484, 0.999018323, 0.999182224, 0.999318718,]
    function calc() {
        var nanido = document.getElementById("t1"); nanido = eval(nanido.value);
        var kotei = document.getElementById("t2"); kotei = eval(kotei.value);
        var n = document.getElementById("t3"); n = eval(n.value);
        if (kotei === NaN || kotei === undefined) {
            kotei = 0
        }
        if (nanido === NaN || nanido === undefined) {
            err()
            return
        }
        if (n === NaN || n === undefined || n < 2 || n > 40) {
            err()
            return
        }
        var res = 0;
        if (nanido - kotei <= 2) {//固定値だけで確定成功 ただし絶対失敗を考慮
            res = 1 - table2[n - 2]
            res = res * 100
            res = Math.round(res * 10) / 10
        } else if (document.getElementById('deadeye').checked && nanido - kotei >= 11) {//必殺など絶対成功を11に上書き系列
            res = 0 + table11[n - 2]
            res = res * 100
            res = Math.round(res * 10) / 10
        } else if (nanido - kotei >= 12) {//絶対成功頑張ってくれ(^^)
            res = 0 + table12[n - 2]
            res = res * 100
            res = Math.round(res * 10) / 10
        } else {
            res = table[nanido - kotei - 2][n - 2]
            res = res * 100
            res = Math.round(res * 10) / 10
        }
        moji = "お前に教える<br>" + n + "mk+" + kotei + ">=" + nanido + "<br>成功確率…"
        moji += "" + res + "%！"
        if (document.getElementById('deadeye').checked && nanido - kotei >= 11) {
            moji += "<br>絶対成功確率…" + Math.round(table11[n - 2] * 100 * 10) / 10 + "%！"
        } else {
            moji += "<br>絶対成功確率…" + Math.round(table12[n - 2] * 100 * 10) / 10 + "%！"
        }
        moji += "<br>絶対失敗確率…" + Math.round(table2[n - 2] * 100 * 10) / 10 + "%！"
        i = document.getElementById("div1");
        i.innerHTML = moji;

    }
    function err() {
        //入力が間違っている場合
        errlist = [
            "なんだ！？(^^)なんだ！？(^^)\nどこの入力を間違えたんだ？",
            "うぐっエラーな入力すぎだァ～～！！\n浮上するぞォ！！",
            "ｶﾞﾗﾗﾗ←入力を確認する\nわ…わりぃ!!!!//////\nﾋﾟｼｬﾝ!!!!←処理を閉める\n(でも……なんかヘンな入力見た//////)",
            "おまｯ!?なんて数値してんだ!?\nんな数値で計算機ん中を歩き回るな（怒）",
            "ｽﾞﾁﾞｭｯｸﾞﾁｭ、ｽﾞﾌﾟﾝｯ!!(数値由来のエラーが突き上げる)",
            "決めたんやボクエラーになる\nエラーになって変えたる\n入力間違えた乱菊が泣かんでもええようにしたる",
            "大丈夫。こわくないよ。おいで。\nお姉さんと一緒に入力値確認しよう。",
            "あ、オレや…数値エラーや…",
            "爺ちゃんが出てきた確率を「こんなもんこうじゃ」って焼酎に付けて\n「怖いじゃろワシは怖ない」\nとか言いながら食ってエラー吐いて救急車騒ぎになったの、\n今でも意味わかんないんだよな。",
            "共に数値を確認しよう\n同星達よ……!!",
            "は、入力値のミスということか……そう簡単にはいかないか……。",
            "明日になったら　数値確認しようよ",
            "今日 お前には\"エラー\"が出ている",
            "これって……\nああ\n\n数値のエラーだ"
        ]
        myrand = Math.floor(Math.random() * errlist.length);
        alert(errlist[myrand]);
    }

</script>
<style>
    .gaming {
        /* 横長で虹色を作る */
        background: linear-gradient(to right, Magenta, yellow, Cyan, Magenta) 0% center/200%;
        animation: gaming 2s linear infinite;
    }

    @keyframes gaming {

        /* backgroundを移動させる */
        100% {
            background-position-x: 200%;
        }
    }
</style>